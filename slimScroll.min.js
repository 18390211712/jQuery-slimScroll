/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.2.6
 *
 */
(function(a){jQuery.fn.extend({slimScroll:function(c){var b=c;this.each(function(){var A,u,j,p,v,k="<div></div>",x=30,r=30,q=b||{},w=q.width||"auto",s=q.height||"250px",n=q.size||"7px",t=q.color||"#000",F=q.position||"right",h=q.distance||"1px",g=q.opacity||0.4,m=q.alwaysVisible===true;var D=a(this);var i=a(k).css({position:"relative",overflow:"hidden",width:w,height:s}).attr({"class":"slimScrollDiv"});D.css({overflow:"hidden",width:w,height:s});var d=a(k).css({width:"15px",height:"100%",position:"absolute",top:0});var y=a(k).attr({"class":"slimScrollBar ",style:"border-radius: "+n}).css({background:t,width:n,position:"absolute",top:0,opacity:g,display:m?"block":"none",BorderRadius:n,MozBorderRadius:n,WebkitBorderRadius:n,zIndex:99});var e=(F=="right")?{right:h}:{left:h};d.css(e);y.css(e);D.wrap(i);D.parent().append(y);D.parent().append(d);y.draggable({axis:"y",containment:"parent",start:function(){j=true},stop:function(){j=false;l()},drag:function(o){z(0,a(this).position().top,false)}});d.hover(function(){f()},function(){l()});y.hover(function(){u=true},function(){u=false});D.hover(function(){A=true;f();l()},function(){A=false;l()});var C=function(o){if(!A){return}var o=o||window.event;var G=0;if(o.wheelDelta){G=-o.wheelDelta/120}if(o.detail){G=o.detail/3}z(0,G,true);if(o.preventDefault){o.preventDefault()}o.returnValue=false};var z=function(o,J,G){var I=J;if(G){I=y.position().top+J*r;I=Math.max(I,0);var H=D.outerHeight()-y.outerHeight();I=Math.min(I,H);y.css({top:I+"px"})}percentScroll=parseInt(y.position().top)/(D.outerHeight()-y.outerHeight());I=percentScroll*(D[0].scrollHeight-D.outerHeight());D.scrollTop(I);f()};var B=function(){if(window.addEventListener){this.addEventListener("DOMMouseScroll",C,false);this.addEventListener("mousewheel",C,false)}else{document.attachEvent("onmousewheel",C)}};B();var E=function(){v=Math.max((D.outerHeight()/D[0].scrollHeight)*D.outerHeight(),x);y.css({height:v+"px"})};E();var f=function(){E();clearTimeout(p);if(v>=D.outerHeight()){return}y.fadeIn("fast")};var l=function(){if(!m){p=setTimeout(function(){if(!u&&!j){y.fadeOut("slow")}},1000)}}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);