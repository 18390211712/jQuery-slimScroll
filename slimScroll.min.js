/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 0.2.4
 *
 */
(function(a){jQuery.fn.extend({slimScroll:function(c){var b=c;this.each(function(){var x,s,i,m,j="<div></div>",u=30,p=30,n=b||{},t=n.width||"auto",q=n.height||"250px",l=n.size||"7px",r=n.color||"#000",B=n.position||"right",g=n.opacity||0.4;var A=a(this);var h=a(j).css({position:"relative",overflow:"hidden",width:t,height:q}).attr({"class":"slimScrollDiv"});A.css({overflow:"hidden",width:t,height:q});var d=a(j).css({width:"15px",height:"100%",position:"absolute",top:0});var v=a(j).attr({"class":"slimScrollBar ",style:"border-radius: "+l}).css({background:r,width:l,position:"absolute",top:0,opacity:g,display:"none",BorderRadius:l,MozBorderRadius:l,WebkitBorderRadius:l,zIndex:99});var e=(B=="right")?{right:"1px"}:{left:"1px"};d.css(e);v.css(e);A.wrap(h);A.parent().append(v);A.parent().append(d);v.draggable({axis:"y",containment:"parent",start:function(){i=true},stop:function(){i=false;k()},drag:function(o){w(0,a(this).position().top,false)}});d.hover(function(){f()},function(){k()});v.hover(function(){s=true},function(){s=false});A.hover(function(){x=true;f();k()},function(){x=false;k()});var z=function(o){if(!x){return}var o=o||window.event;var C=0;if(o.wheelDelta){C=-o.wheelDelta/120}if(o.detail){C=o.detail/3}w(0,C,true);if(o.preventDefault){o.preventDefault()}o.returnValue=false};var w=function(o,F,C){var E=F;if(C){E=v.position().top+F*p;E=Math.max(E,0);var D=A.outerHeight()-v.outerHeight();E=Math.min(E,D);v.css({top:E+"px"})}percentScroll=parseInt(v.position().top)/(A.outerHeight()-v.outerHeight());E=percentScroll*(A[0].scrollHeight-A.outerHeight());A.scrollTop(E);f()};var y=function(){if(window.addEventListener){this.addEventListener("DOMMouseScroll",z,false);this.addEventListener("mousewheel",z,false)}else{document.attachEvent("onmousewheel",z)}};y();var f=function(){var o=Math.max((A.outerHeight()/A[0].scrollHeight)*A.outerHeight(),u);v.css({height:o+"px"});clearTimeout(m);if(o>=A.outerHeight()){return}v.fadeIn("fast")};var k=function(){m=setTimeout(function(){if(!s&&!i){v.fadeOut("slow")}},1000)}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);